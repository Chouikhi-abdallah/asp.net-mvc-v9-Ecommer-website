@{
ViewData["Title"] = "Your Cart";
}

<div class="container mt-5">
    <h2 class="mb-4">Your Shopping Cart</h2>

    <!-- Check if the cart is empty -->
    @if (Model == null)
    {
    <div class="alert alert-info">Your cart is empty. Add some items to your cart!</div>
    }
    else
    {
    <!-- Cart Table -->
    <table class="table table-bordered table-striped">
        <thead class="thead-dark">
        <tr>
            <th scope="col">Product</th>
            <th scope="col">Price</th>
            <th scope="col">Quantity</th>
            <th scope="col">Total</th>
            <th scope="col">Actions</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var cartItem in Model)
        {
        <tr>
            <td>
                <img src="@cartItem.Product?.ImagePath" class="img-fluid" style="max-width: 50px;" alt="@cartItem.Product?.Name" />
                @cartItem.Product?.Name
            </td>
            <td>@cartItem.Product?.Price</td>
            <td>
                <form method="post" action="@Url.Action("UpdateCartItem", "Customer")" class="d-inline">
                    <input type="hidden" name="cartItemId" value="@cartItem.Id" />
                    <button type="submit" name="increase" value="false" class="btn btn-sm btn-secondary"><i class="fa fa-minus"></i></button>
                </form>
                @cartItem.Quantity
                <form method="post" action="@Url.Action("UpdateCartItem", "Customer")" class="d-inline">
                    <input type="hidden" name="cartItemId" value="@cartItem.Id" />
                    <button type="submit" name="increase" value="true" class="btn btn-sm btn-secondary"><i class="fa fa-plus"></i></button>
                </form>
            </td>
            @{
                var x = @cartItem.Product?.Price;
                var y = @cartItem.Quantity;
                var res = x * y;
                
            }
            <td>@res</td>
            <td>
                <form method="post" action="@Url.Action("RemoveFromCart", "Customer")" class="d-inline">
                    <input type="hidden" name="cartItemId" value="@cartItem.Id" />
                    <button type="submit" class="btn btn-sm btn-danger"><i class="fa fa-trash"></i> Remove</button>
                </form>
            </td>
        </tr>
        }
        </tbody>
    </table>

    <!-- Total Price -->
    <div class="d-flex justify-content-between">
        <h4>Total: $@ViewBag.Total</h4>
        <a href="/Customer/Checkout" class="btn btn-primary">Proceed to Checkout</a>
    </div>
    }
</div>

<!-- Bootstrap JS and dependencies -->
<script src="https://cdn.jsdelivr.net/npm/popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
